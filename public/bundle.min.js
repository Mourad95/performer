!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("./CostAlgorithmParameters.js"),e=a("./CostAlgorithmHelpers.js"),f=function(a,b,c,f,g){var h=a.toString()+","+b.toString()+","+c.toString()+","+f.toString(),i=Math.abs(b-a),j=e.fingerDistance(c,f);if(Math.abs(b-a)>0&&f-c===0)g[h]=e.ascMoveFormula(i,j,a,b);else if(b-a>=0&&0>f-c&&1!==f)g[h]=e.ascMoveFormula(i,j,a,b,c,f);else if(0>b-a&&f-c>0&&1!==c)g[h]=e.ascMoveFormula(i,j,a,b,c,f);else if(b-a>=0&&0>f-c&&1===f)g[h]=e.ascThumbCost(i,j,a,b,c,f);else if(0>b-a&&1===c&&1!==f)g[h]=e.descThumbCost(i,j,a,b,c,f);else{var k=e.fingerStretch(c,f),l=Math.abs(i-j)/k;l>d.moveCutoff?g[h]=e.descMoveFormula(i,j,a,b,c,f):g[h]=e.ascDescNoCrossCost(i,j,l,a,b,c,f)}};b.exports.createCostDatabase=function(){for(var a={},b=1;5>=b;b++)for(var c=21;109>c;c++)for(var d=1;5>=d;d++)for(var e=21;109>e;e++)f(c,e,b,d,a);return a}},{"./CostAlgorithmHelpers.js":2,"./CostAlgorithmParameters.js":3}],2:[function(a,b,c){var d=a("./CostAlgorithmParameters.js"),e=b.exports,f=function(a){return.0002185873295*Math.pow(a,7)-.008611946279*Math.pow(a,6)+.1323250066*Math.pow(a,5)-1.002729677*Math.pow(a,4)+3.884106308*Math.pow(a,3)-6.723075747*Math.pow(a,2)+1.581196785*a+7.711241722},g=function(a,b,c,e,f){if("White"===d.color[a%12]&&"Black"===d.color[b%12]){if(5===e||1===e)return 4;if(0===f)return 4}if("Black"===d.color[a%12]&&"White"===d.color[b%12]){if(5===c||1===c)return 4;if(0===f)return-1}return 0},h=e.ascMoveFormula=function(a,b,c,e,f,h){var i,j=Math.ceil(a+b);return j>24?d.moveHash[24]+(j-24)/5:(i=d.moveHash[j],i+=g(c,e,f,h,b))};e.descMoveFormula=function(a,b,c,e,f,h){var i,j=Math.ceil(a-b);return j>24?d.moveHash[24]+(j-24)/5:(i=d.moveHash[j],i+=g(c,e,f,h,b))},e.fingerDistance=function(a,b){var c=a.toString()+","+b.toString();return d.fingDistance[c]},e.ascThumbCost=function(a,b,c,e,g,i){var k=j(g,i),l=(a+b)/k;if(l>10)return h(a,b);var m=f(l);return"White"===d.color[c%12]&&"Black"===d.color[e%12]&&(m+=8),m},e.descThumbCost=function(a,b,c,e,g,j){var k=i(g,j),l=(a+b)/k;if(l>10)return h(a,b);var m=f(l);return"Black"===d.color[c%12]&&"White"===d.color[e%12]&&(m+=8),m};var i=e.descThumbStretch=function(a,b){var c=a.toString()+","+b.toString();return d.descThumbStretchVals[c]},j=e.ascThumbStretch=function(a,b){var c=a.toString()+","+b.toString();return d.ascThumbStretchVals[c]};e.fingerStretch=function(a,b){var c=a.toString()+","+b.toString();return d.fingStretch[c]},e.ascDescNoCrossCost=function(a,b,c,e,f,h,i){var j,k=function(a){return-6.589793725e-7*Math.pow(a,10)-2336381414e-15*Math.pow(a,9)+9925769823e-14*Math.pow(a,8)+.0001763353131*Math.pow(a,7)-.004660305277*Math.pow(a,6)-.004290746384*Math.pow(a,5)+.06855725903*Math.pow(a,4)+.03719817227*Math.pow(a,3)+.4554696705*Math.pow(a,2)-.08305450359*a+.3020594956};return c>6.8&&c<=d.moveCutoff?k(6.8)+3*(c-6.8):(j=k(c),j+=g(e,f,h,i))}},{"./CostAlgorithmParameters.js":3}],3:[function(a,b,c){var d=b.exports;d.moveCutoff=7.5,d.color={0:"White",1:"Black",2:"White",3:"Black",4:"White",5:"White",6:"Black",7:"White",8:"Black",9:"White",10:"Black",11:"White"},d.fingDistance={"1,1":0,"1,2":2,"1,3":3.5,"1,4":5,"1,5":7,"2,1":2,"2,2":0,"2,3":2,"2,4":3.5,"2,5":5,"3,1":3.5,"3,2":2,"3,3":0,"3,4":2,"3,5":3.5,"4,1":5,"4,2":3.5,"4,3":2,"4,4":0,"4,5":2,"5,1":7,"5,2":5,"5,3":3.5,"5,4":2,"5,5":0};var e=d.makeMoveHash=function(a){var b={1:0,2:.5,3:1.8,4:3,5:5,6:7,7:8,8:8.9,9:9.7,10:10.5,11:11,12:11.4,13:11.8,14:12.2,15:12.5,16:12.8,17:13.1,18:13.4,19:13.7,20:14,21:14.3,22:14.6,23:14.9,24:15.2};for(var c in b)b[c]+=a;return b};d.moveHash=e(4),d.descThumbStretchVals={"1,2":1,"1,3":1,"1,4":.9,"1,5":.95},d.ascThumbStretchVals={"2,1":.95,"3,1":1,"4,1":.95,"5,1":.95},d.fingStretch={"1,1":.8,"1,2":1.15,"1,3":1.4,"1,4":1.45,"1,5":1.6,"2,1":1.15,"2,2":.6,"2,3":.9,"2,4":1.15,"2,5":1.3,"3,1":1.4,"3,2":.9,"3,3":.6,"3,4":.9,"3,5":1.15,"4,1":1.45,"4,2":1.15,"4,3":.9,"4,4":.7,"4,5":.7,"5,1":1.6,"5,2":1.3,"5,3":1.15,"5,4":.8,"5,5":.6}},{}],4:[function(a,b,c){var d=a("./FingeringAlgorithmHelpers.js");b.exports.FingeringAlgorithm=function(a){var b=d.addStartTimes(a);app.preComputed=app.preComputed||[];for(var c=0;c<app.preComputed.length;c++)if(app.preComputed[c].title===app.currentSong){var e=app.preComputed[c].BestPathObj;return void d.distributePath(e,b)}for(var f=d.makeNoteTrellis(b),g=1;g<f.length;g++)for(var h=0;h<f[g].length;h++)for(var i=1/0,j=0;j<f[g-1].length;j++){var k=f[g][h],l=f[g-1][j],m=l.nodeScore||0,n=d.getSplitData(k),o=d.getSplitData(l),p=n.right,q=o.right;if(p.notes.length>0)for(var r=2,s=l;0===q.notes.length;){var t=s.bestPrev,u=f[g-r][t];q=d.getSplitData(u).right,r++,s=u}var v=n.left,w=o.left;if(v.notes.length>0)for(var r=2,s=l;0===w.notes.length;){var t=s.bestPrev,u=f[g-r][t];w=d.getSplitData(u).left,r++,s=u}var x=d.calcCost(p,q,v,"RH"),y=d.calcCost(v,w,p,"LH");m+=x+y,i>m&&(i=m,k.nodeScore=m,k.bestPrev=j)}for(var z=d.findMin(f[f.length-1]),A={},B=f.length-1;B>0;B--){for(var C=f[B][z],D=C.fingers,E=C.notes,F=0;F<E.length;F++){var G=E[F][0],H=E[F][1],I=D[F],J=G+","+H;A[J]=I}z=C.bestPrev}d.distributePath(A,b)}},{"./FingeringAlgorithmHelpers.js":5}],5:[function(a,b,c){var d=a("./CostAlgorithm.js").createCostDatabase(),e=a("./LHCostAlgorithm.js").createLHCostDatabase(),f=b.exports;f.notes={0:"C",1:"C#",2:"D",3:"Eb",4:"E",5:"F",6:"F#",7:"G",8:"G#",9:"A",10:"Bb",11:"B"};for(var g=function(a){var b=[],c=[-5,-4,-3,-2,-1,1,2,3,4,5],d=function(a,c,e){if(c.length===a)return void b.push(c.slice());for(var f=0;f<e.length;f++){c.push(e[f]);var g=c,h=e.slice();h.splice(0,f+1),d(a,g,h),c.pop()}};return d(a,[],c),b},h={},i=1;10>=i;i++)h[i]=g(i);var j=[{notes:["e","e"],fingers:[1,-1]}],k=function(a,b){this.notes=a,this.fingers=b,this.nodeScore=0,this.bestPrev=void 0},l=function(a){for(var b=a.sort(function(a,b){return a[0]-b[0]}),c=[],d=h[b.length],e=0;e<d.length;e++){var f=d[e],g=new k(b,f);c.push(g)}return c},m=function(a,b){for(var c=0;c<a.length;c++)if(a[c][0]===b)return c};f.makeNoteTrellis=function(a){var b=[],c=!1,d=[];d.push(j);for(var e=0;e<a.length;e++){var f,g,h=a[e][0].event,i=h.noteNumber;if("noteOn"===h.subtype){var k=h.startTime;b.push([i,k]),c=!0}"noteOff"===h.subtype&&(c?(f=l(b.slice()),d.push(f),g=m(b,i),b.splice(g,1),c=!1):(g=m(b,i),b.splice(g,1),c=!1))}return d};var n=function(a,b,c,e){if("e"===a||"e"===b)return 0;var f=a+","+b+","+c+","+e,g=d[f],h=60-b;return g+=h>0?h:0},o=function(a,b,c,d){if("e"===a||"e"===b)return 0;c=Math.abs(c),d=Math.abs(d);var f=a+","+b+","+c+","+d,g=e[f],h=b-60;return g+=h>0?h:0};f.findMin=function(a){for(var b,c=1/0,d=0;d<a.length;d++)a[d].nodeScore<c&&(c=a[d].nodeScore,b=d);return b},f.distributePath=function(a,b){var c={};for(var d in a)a[d]=+a[d];for(var e=0;e<b.length;e++){var f=b[e][0].event,g=f.noteNumber;if("noteOn"===f.subtype){var h=f.startTime,i=g+","+h,j=a[i];f.finger=j,c[g]=j}"noteOff"===f.subtype&&(f.finger=c[g])}},f.addStartTimes=function(a){for(var b=0,c=0;c<a.length;c++){var d=a[c][0].event;"noteOff"===d.subtype?b+=d.deltaTime:"noteOn"===d.subtype&&(d.startTime=b,b+=d.deltaTime)}return a},f.getSplitData=function(a){for(var b={right:{notes:[],fingers:[]},left:{notes:[],fingers:[]}},c=0;c<a.fingers.length;c++)a.fingers[c]>0?(b.right.fingers.push(a.fingers[c]),b.right.notes.push(a.notes[c])):(b.left.fingers.push(a.fingers[c]),b.left.notes.push(a.notes[c]));return b},f.calcCost=function(a,b,c,d){for(var e="RH"===d?n:o,f=0,g=0;g<a.notes.length;g++){var h=a.notes[g][0],i=a.fingers[g],j=a.notes[g+1]||!1,k=a.fingers[g+1];f+=j?e(h,j[0],i,k):"RH"===d?60-h:h-60;for(var l=0;l<b.notes.length;l++){var m=b.notes[l][0],p=b.fingers[l],q=e(m,h,p,i);f+=q}}return f}},{"./CostAlgorithm.js":1,"./LHCostAlgorithm.js":6}],6:[function(a,b,c){var d=a("./CostAlgorithmParameters.js"),e=a("./CostAlgorithmHelpers.js"),f=function(a,b,c,f,g){var h=a.toString()+","+b.toString()+","+c.toString()+","+f.toString(),i=Math.abs(b-a),j=e.fingerDistance(c,f);if(i>0&&f-c===0)g[h]=e.ascMoveFormula(i,j,a,b);else if(0>=b-a&&0>f-c&&1!==f)g[h]=e.ascMoveFormula(i,j);else if(b-a>0&&f-c>0&&1!==c)g[h]=e.ascMoveFormula(i,j);else if(0>=b-a&&0>f-c&&1===f)g[h]=e.ascThumbCost(i,j,a,b,c,f);else if(b-a>=0&&1===c&&1!==f)g[h]=e.descThumbCost(i,j,a,b,c,f);else{var k=e.fingerStretch(c,f),l=Math.abs(i-j)/k;l>d.moveCutoff?g[h]=e.descMoveFormula(i,j):g[h]=e.ascDescNoCrossCost(i,j,l,a,b,c,f)}};b.exports.createLHCostDatabase=function(){for(var a={},b=1;5>=b;b++)for(var c=21;109>c;c++)for(var d=1;5>=d;d++)for(var e=21;109>e;e++)f(c,e,b,d,a);return a}},{"./CostAlgorithmHelpers.js":2,"./CostAlgorithmParameters.js":3}],7:[function(a,b,c){var d=a("./Visuals/Piano/KeyboardDesign.js").KeyboardDesign,e=a("./Visuals/Piano/Keyboard.js").Keyboard,f=a("./Visuals/Hands/Right/RightHand.js").RightHand,g=a("./Visuals/Hands/Left/LeftHand.js").LeftHand,h=a("./Visuals/Scene.js").Scene,i=(a("./Algorithms/CostAlgorithm").createCostDatabase,a("./Algorithms/FingeringAlgorithm.js").FingeringAlgorithm),j=a("./PlayControls.js").PlayControls;b.exports.App=function(){this.keyboardDesign=new d,this.keyboard=new e(this.keyboardDesign),this.rightHand=new f(this.keyboard),this.leftHand=new g(this.keyboard),this.player=MIDI.Player;var a=this;this.player.addListener(function(b){var c=a.rightHand,d=a.leftHand,e=144,f=128,g=b.note,h=b.message,i=b.finger;h===e?(a.keyboard.press(g),i>0?c.press(i,g):d.press(i,g)):h===f&&(a.keyboard.release(g),i>0?c.release(i):d.release(i))}),this.player.setAnimation({delay:20,callback:function(b){var c=b.now,d=b.end;a.playControls.displayProgress(c,d)}}),this.loadMidiFile=function(a,b){var c=this;this.player.loadFile(a,function(){c.playControls.setCurrentTime(b)})},this.upload=function(a){var b=this,c=new FileReader;c.onload=function(a){var c=a.target.result;b.loadMidiFile(c)},c.readAsDataURL(a)},this.initScene=function(){var a=this;this.scene=new h("#canvas"),this.scene.add(this.keyboard.model),this.scene.add(this.rightHand.model),this.scene.add(this.leftHand.model),this.scene.animate(function(){a.keyboard.update(),a.rightHand.update(),a.leftHand.update(),TWEEN.update()})},this.initMIDI=function(a){MIDI.loadPlugin(function(){MIDI.channels[9].mute=!0,"function"==typeof a&&a()})},this.initPlayControls=function(b,c){a.playControls=new j(b,c)},this.fingeringAlgorithm=function(){i(a.player.data)}}},{"./Algorithms/CostAlgorithm":1,"./Algorithms/FingeringAlgorithm.js":4,"./PlayControls.js":9,"./Visuals/Hands/Left/LeftHand.js":14,"./Visuals/Hands/Right/RightHand.js":20,"./Visuals/Piano/Keyboard.js":26,"./Visuals/Piano/KeyboardDesign.js":27,"./Visuals/Scene.js":29}],8:[function(a,b,c){var d=a("./App.js").App;$(document).on("ready",function(){var a=window.app=new d;a.initMIDI(function(){a.initScene(),$.ajax({url:"/getAllPaths",dataType:"json",success:function(b){a.preComputed=b,console.log("We're initializing play controls!"),a.initPlayControls($(".main-container"),a),$($(".player-songList > li")[0]).trigger("click")}})})})},{"./App.js":7}],9:[function(a,b,c){b.exports.PlayControls=function(a,b){var c=($(a),$(".player-songListContainer"),$(".player-controls"),$(".player-progress-container")),d=$(".player-progress-bar"),e=($(".player-progress-text"),$(".player-songList")),f=($(".song"),$(".tempo-changer")),g=$(".player-playBtn"),h=$(".player-pauseBtn"),i=$(".current-song"),j=this;this.play=function(){g.hide(),h.show(),j.playing=!0,b.player.resume()},this.playHandler=function(){j.playing===!1?j.resume():j.play()},this.pauseHandler=function(){j.pause()},this.songListHandler=function(a){var c=$(a.target),d=c.text();i.text(d),j.playing=!1,b.currentSong=d,$.ajax({url:"/songs/"+d,dataType:"text",success:function(a){b.loadMidiFile(a,0)}})},this.resume=function(){g.hide(),h.show(),b.player.currentTime+=1e-6,j.playing=!0,b.player.resume()},this.stop=function(){b.player.stop(),j.playing=!1},this.progressHandler=function(a){var b=(a.clientX-c.offset().left)/c.width();j.setCurrentTime(b)},this.tempoHandler=function(a){var e=$(a.target),f=e.find("input").attr("data-timeWarp");b.player.timeWarp=f;var g=b.currentSong;$.ajax({url:"/songs/"+g,dataType:"text",success:function(a){var e=d.width()/c.width();b.loadMidiFile(a,e)}})},this.pause=function(){j.playing=!1,g.show(),h.hide(),b.player.pause(),j.resume()},this.getEndTime=function(){return b.player.endTime},this.displayProgress=function(a,b){var e=a/b,f=Math.floor(e*c.width());d.width(f)},this.setCurrentTime=function(a){var c=b.player.endTime*a;b.player.currentTime=c,setTimeout(j.resume,10),b.player.pause()},g.on("click",j.playHandler),h.on("click",j.pauseHandler),e.on("click",j.songListHandler),c.on("click",j.progressHandler),f.on("click",j.tempoHandler)}},{}],10:[function(a,b,c){b.exports.Dummy=function(){var a=new THREE.CubeGeometry(1,1,1),b=new THREE.MeshLambertMaterial({color:0}),c=new THREE.Vector3(0,0,0);this.model=new THREE.Mesh(a,b),this.model.position.copy(c),this.model.visible=!1}},{}],11:[function(a,b,c){var d=a("./FingerMoveParams.js").params;b.exports.Finger=function(a){var b=.6;this.originalY=.2,this.pressedY=this.originalY-b,this.releaseSpeed=.05,this.moveSpeed=.1;var c=a;this.distances=d(c),this.press=function(a){this.moveToNote(a),this.model.position.y=this.pressedY,this.isPressed=!0},this.release=function(){this.isPressed=!1},this.moveToNote=function(a){this.currentPos.x=this.model.position.x,this.currentPos.y=this.model.position.y,this.currentPos.z=this.model.position.z;var b=this.model.parent.children[this.number+1].currentNote,c=this.model.parent.children[this.number-1].currentNote;a>this.model.currentNote?b===a?this.model.currentNote=a-1:this.model.currentNote=a:a<this.model.currentNote&&(c===a?this.model.currentNote=a+1:this.model.currentNote=a),this.setNewPos(this.model.currentNote),this.setUpNewTween()},this.update=function(){if(this.model.position.y<this.originalY&&this.isPressed===!1){var a=this.originalY-this.model.position.y;this.model.position.y+=Math.min(a,this.releaseSpeed)}},this.currentPos={x:0,y:0,z:0},this.newPos={x:0,y:0,z:0},this.setNewPos=function(a){this.newPos.x=c.model.children[a-21].position.x,this.newPos.y=c.keys[a].model.position.y+this.originalY,this.newPos.z=c.keys[a].model.position.z+.5},this.setUpNewTween=function(){var a=this,b=function(){a.model.position.x=a.currentPos.x,a.model.position.y=a.currentPos.y+.1,a.model.position.z=a.currentPos.z},c=TWEEN.Easing.Quadratic.Out,d=new TWEEN.Tween(this.currentPos).to(this.newPos,150).easing(c).onUpdate(b);d.start()},this.setUpPressReleaseTween=function(){}}},{"./FingerMoveParams.js":12}],12:[function(a,b,c){b.exports.params=function(a){var b={};return b.get=function(b,c){return a.model.children[c-21].position.x-a.model.children[b-21].position.x},b}},{}],13:[function(a,b,c){b.exports.HandDesign=function(a){this.pinkyWidth=.14,this.pinkyHeight=.1,this.pinkyLength=.57,this.pinkyColor=16711680,this.ringFingerWidth=.18,this.ringFingerHeight=.1,this.ringFingerLength=.61,this.ringFingerColor=26112,this.middleFingerWidth=.185,this.middleFingerHeight=.1,this.middleFingerLength=.7,this.middleFingerColor=13311,this.indexFingerWidth=.188,this.indexFingerHeight=.1,this.indexFingerLength=.6,this.indexFingerColor=16776960,this.thumbWidth=.175,this.thumbHeight=.1,this.thumbLength=.5,this.thumbColor=16724991,this.keyboard=a,this.keyboardHeight=.22}},{}],14:[function(a,b,c){var d=a("./LeftPinky.js").LeftPinky,e=a("./LeftRing.js").LeftRing,f=a("./LeftMiddle.js").LeftMiddle,g=a("./LeftIndex.js").LeftIndex,h=a("./LeftThumb.js").LeftThumb,i=a("../HandDesign.js").HandDesign,j=a("../Dummy.js").Dummy;b.exports.LeftHand=function(a){var b=this,c=new i(a),k=new d(c,"left"),l=new e(c,"left"),m=new f(c,"left"),n=new g(c,"left"),o=new h(c,"left"),p=new j,q=new j;this.fingers=[],this.model=new THREE.Object3D,this.fingers.push(void 0),this.model.add(p.model),p.model.currentNote=-1,this.model.add(o.model),this.fingers.push(o),o.model.currentNote=1,this.model.add(n.model),this.fingers.push(n),n.model.currentNote=1,this.model.add(m.model),this.fingers.push(m),m.model.currentNote=1,this.model.add(l.model),this.fingers.push(l),l.model.currentNote=1,this.model.add(k.model),this.fingers.push(k),k.model.currentNote=1,this.model.add(q.model),q.model.currentNote=110,o.moveToNote(55),n.moveToNote(53),m.moveToNote(52),l.moveToNote(50),k.moveToNote(48),this.model.position.y-=.11,this.model.traverse(function(a){a.position.x-=4.45}),this.offSet=.2222,this.press=function(c,d){c=Math.abs(c);for(var e=a.keys[d].model.position.x,f=1;5>=f;f++)f===c?b.fingers[f].press(d):b.fingers[f].moveAsNeeded(c,e,d)},this.release=function(a){a=Math.abs(a),b.fingers[a].release()},this.update=function(){for(var a=b.fingers,c=1;c<a.length;c++)a[c].update()}}},{"../Dummy.js":10,"../HandDesign.js":13,"./LeftIndex.js":15,"./LeftMiddle.js":16,"./LeftPinky.js":17,"./LeftRing.js":18,"./LeftThumb.js":19}],15:[function(a,b,c){var d=a("../Finger.js").Finger,e=b.exports.LeftIndex=function(a){d.call(this,a.keyboard);var b=new THREE.CubeGeometry(a.indexFingerWidth,a.indexFingerHeight,a.indexFingerLength),c=new THREE.MeshLambertMaterial({color:a.indexFingerColor}),e=new THREE.Vector3(0,.2,.4);this.model=new THREE.Mesh(b,c),this.model.position.copy(e),this.originalY=e.y,this.number=2;var f=this.distances;this.moveAsNeeded=function(a,b,c){var d=this.currentPos.x,e=b-d,f=this.model.currentNote;switch(a){case 5:this.pinkyRules(e,d,f,c);break;case 4:this.ringRules(e,d,f,c);break;case 3:this.middleRules(e,d,f,c);break;case 1:this.thumbRules(e,d,f,c)}},this.pinkyRules=function(a,b,c,d){a>=f.get(c,c-8)&&a<=f.get(c,c-4)||this.moveToNote(d+5)},this.ringRules=function(a,b,c,d){a>=f.get(c,c-6)&&a<=f.get(c,c-4)||this.moveToNote(d+3)},this.middleRules=function(a,b,c,d){a>=f.get(c,c-5)&&a<=f.get(c,c-1)||this.moveToNote(d+4)},this.thumbRules=function(a,b,c,d){if(!(a>0&&a<=f.get(c,c+4)))if(a>f.get(c,c-3)&&0>a){var e=this;setTimeout(e.moveToNote(d-2),100)}else this.moveToNote(d-2)}};e.prototype=Object.create(d.prototype),e.prototype.constructor=e},{"../Finger.js":11}],16:[function(a,b,c){var d=a("../Finger.js").Finger,e=b.exports.LeftMiddle=function(a){d.call(this,a.keyboard);var b=new THREE.CubeGeometry(a.middleFingerWidth,a.middleFingerHeight,a.middleFingerLength),c=new THREE.MeshLambertMaterial({color:a.middleFingerColor}),e=new THREE.Vector3(0,.2,.4);this.model=new THREE.Mesh(b,c),this.model.position.copy(e),this.originalY=e.y,this.number=3;var f=this.distances;this.moveAsNeeded=function(a,b,c){var d=this.currentPos.x,e=b-d,f=this.model.currentNote;switch(a){case 5:this.pinkyRules(e,d,f,c);break;case 4:this.ringRules(e,d,f,c);break;case 2:this.indexRules(e,d,f,c);break;case 1:this.thumbRules(e,d,f,c)}},this.pinkyRules=function(a,b,c,d){a>f.get(c,c-5)&&a<f.get(c,c-3)||this.moveToNote(d+3)},this.ringRules=function(a,b,c,d){a>f.get(c,c-4)&&a<f.get(c,c-1)||this.moveToNote(d+2)},this.indexRules=function(a,b,c,d){a>0&&a<f.get(c,c+3)||this.moveToNote(d-2)},this.thumbRules=function(a,b,c,d){if(!(a>0&&a<f.get(c,c+6)))if(a>f.get(c,c-4)&&0>a){var e=this;setTimeout(e.moveToNote(d-3),100)}else this.moveToNote(d-3)}};e.prototype=Object.create(d.prototype),e.prototype.constructor=e},{"../Finger.js":11}],17:[function(a,b,c){var d=a("../Finger.js").Finger,e=b.exports.LeftPinky=function(a){d.call(this,a.keyboard);var b=new THREE.CubeGeometry(a.pinkyWidth,a.pinkyHeight,a.pinkyLength),c=new THREE.MeshLambertMaterial({color:a.pinkyColor}),e=new THREE.Vector3(0,.2,.54);this.model=new THREE.Mesh(b,c),this.model.position.copy(e),this.originalY=e.y,this.number=5;var f=this.distances;this.moveAsNeeded=function(a,b,c){var d=this.currentPos.x,e=b-d,f=this.model.currentNote;switch(a){case 4:this.ringRules(e,d,f,c);break;case 3:this.middleRules(e,d,f,c);break;case 2:this.indexRules(e,d,f,c);break;case 1:this.thumbRules(e,d,f,c)}},this.ringRules=function(a,b,c,d){a>0&&a<=f.get(c,c+3)||this.moveToNote(d-2)},this.middleRules=function(a,b,c,d){a>0&&a<=f.get(c,c+5)||this.moveToNote(d-3)},this.indexRules=function(a,b,c,d){a>0&&a<=f.get(c,c+7)||this.moveToNote(d-5)},this.thumbRules=function(a,b,c,d){if(!(a>0&&a<=f.get(c,c+12)))if(a>0&&a<=f.get(c,c+1)){var e=this;setTimeout(e.moveToNote(d-7),100)}else this.moveToNote(d-7)},this.setUpNewTween=function(){var a=this,b=function(){a.model.position.x=a.currentPos.x,a.model.position.y=a.currentPos.y+.1,a.model.position.z=a.currentPos.z+.1},c=TWEEN.Easing.Quadratic.Out,d=new TWEEN.Tween(this.currentPos).to(this.newPos,150).easing(c).onUpdate(b);d.start()}};e.prototype=Object.create(d.prototype),e.prototype.constructor=e},{"../Finger.js":11}],18:[function(a,b,c){var d=a("../Finger.js").Finger,e=b.exports.LeftRing=function(a){d.call(this,a.keyboard);var b=new THREE.CubeGeometry(a.ringFingerWidth,a.ringFingerHeight,a.ringFingerLength),c=new THREE.MeshLambertMaterial({color:a.ringFingerColor}),e=new THREE.Vector3(0,.2,.45);this.model=new THREE.Mesh(b,c),this.model.position.copy(e),this.originalY=e.y,this.number=4;var f=this.distances;this.moveAsNeeded=function(a,b,c){var d=this.currentPos.x,e=b-d,f=this.model.currentNote;switch(a){case 5:this.pinkyRules(e,d,f,c);break;case 3:this.middleRules(e,d,f,c);break;case 2:this.indexRules(e,d,f,c);break;case 1:this.thumbRules(e,d,f,c)}},this.pinkyRules=function(a,b,c,d){a>f.get(c,c-3)&&a<f.get(c,c-2)||this.moveToNote(d+2)},this.middleRules=function(a,b,c,d){a>0&&a<f.get(c,c+3)||this.moveToNote(d-2)},this.indexRules=function(a,b,c,d){a>0&&a<f.get(c,c+5)||this.moveToNote(d-3)},this.thumbRules=function(a,b,c,d){if(!(a>0&&a<f.get(c,c+8)))if(a>f.get(c,c-2)&&0>a){var e=this;setTimeout(e.moveToNote(d-5),100)}else this.moveToNote(d-5)}};e.prototype=Object.create(d.prototype),e.prototype.constructor=e},{"../Finger.js":11}],19:[function(a,b,c){var d=a("../Finger.js").Finger,e=b.exports.LeftThumb=function(a){d.call(this,a.keyboard);var b=new THREE.CubeGeometry(a.thumbWidth,a.thumbHeight,a.thumbLength),c=new THREE.MeshLambertMaterial({color:a.thumbColor}),e=new THREE.Vector3(0,.3,.6);this.model=new THREE.Mesh(b,c),this.model.position.copy(e),this.originalY=e.y,this.number=1;var f=this.distances;this.moveAsNeeded=function(a,b,c){var d=this.currentPos.x,e=b-d,f=this.model.currentNote;switch(a){case 5:this.pinkyRules(e,d,f,c);break;case 4:this.ringRules(e,d,f,c);break;case 3:this.middleRules(e,d,f,c);break;case 2:this.indexRules(e,d,f,c)}},this.pinkyRules=function(a,b,c,d){if(!(a>=f.get(c,c-12)&&a<=f.get(c,c-5)))if(a>0&&a<f.get(c,c+1)){var e=this;setTimeout(e.moveToNote(d+7),100)}else this.moveToNote(d+7)},this.ringRules=function(a,b,c,d){if(!(a>=f.get(c,c-9)&&a<=f.get(c,c-4)))if(a>0&&a<f.get(c,c+2)){var e=this;setTimeout(e.moveToNote(d+5),100)}else this.moveToNote(d+5)},this.middleRules=function(a,b,c,d){if(!(a>=f.get(c,c-7)&&a<=f.get(c,c-2)))if(a>0&&a<f.get(c,c+4)){var e=this;setTimeout(e.moveToNote(d+4),100)}else this.moveToNote(d+4)},this.indexRules=function(a,b,c,d){if(!(a>=f.get(c,c-4)&&0>a))if(a>0&&a<f.get(c,c+2)){var e=this;setTimeout(e.moveToNote(d+2),100)}else this.moveToNote(d+2)},this.setUpNewTween=function(){var a=this,b=function(){a.model.position.x=a.currentPos.x,a.model.position.y=a.currentPos.y+.1,a.model.position.z=a.currentPos.z+.2},c=TWEEN.Easing.Quadratic.Out,d=new TWEEN.Tween(this.currentPos).to(this.newPos,150).easing(c).onUpdate(b);d.start()}};e.prototype=Object.create(d.prototype),e.prototype.constructor=e},{"../Finger.js":11}],20:[function(a,b,c){var d=a("./RightPinky.js").RightPinky,e=a("./RightRing.js").RightRing,f=a("./RightMiddle.js").RightMiddle,g=a("./RightIndex.js").RightIndex,h=a("./RightThumb.js").RightThumb,i=a("../HandDesign.js").HandDesign,j=a("../Dummy.js").Dummy;b.exports.RightHand=function(a){var b=this,c=new i(a),k=new d(c,"right"),l=new e(c,"right"),m=new f(c,"right"),n=new g(c,"right"),o=new h(c,"right"),p=new j,q=new j;this.fingers=[],this.model=new THREE.Object3D,this.fingers.push(void 0),this.model.add(p.model),p.model.currentNote=-1,this.model.add(o.model),this.fingers.push(o),o.model.currentNote=5,this.model.add(n.model),this.fingers.push(n),n.model.currentNote=1,this.model.add(m.model),this.fingers.push(m),m.model.currentNote=1,this.model.add(l.model),this.fingers.push(l),l.model.currentNote=1,this.model.add(k.model),this.fingers.push(k),k.model.currentNote=1,this.model.add(q.model),q.model.currentNote=110,o.moveToNote(60),n.moveToNote(62),m.moveToNote(64),l.moveToNote(65),k.moveToNote(67),this.model.position.y-=.11,this.model.traverse(function(a){a.position.x-=4.45}),this.press=function(c,d){for(var e=a.keys[d].model.position.x,f=1;5>=f;f++)f===c?b.fingers[f].press(d):b.fingers[f].moveAsNeeded(c,e,d)},this.release=function(a){b.fingers[a].release()},this.update=function(){for(var a=b.fingers,c=1;c<a.length;c++)a[c].update()}}},{"../Dummy.js":10,"../HandDesign.js":13,"./RightIndex.js":21,"./RightMiddle.js":22,"./RightPinky.js":23,"./RightRing.js":24,"./RightThumb.js":25}],21:[function(a,b,c){var d=a("../Finger.js").Finger,e=b.exports.RightIndex=function(a){d.call(this,a.keyboard);var b=new THREE.CubeGeometry(a.indexFingerWidth,a.indexFingerHeight,a.indexFingerLength),c=new THREE.MeshLambertMaterial({color:a.indexFingerColor}),e=new THREE.Vector3(0,.2,.4);this.model=new THREE.Mesh(b,c),this.model.position.copy(e),this.originalY=e.y,this.number=2;var f=this.distances;this.moveAsNeeded=function(a,b,c){var d=this.currentPos.x,e=b-d,f=this.model.currentNote;switch(a){case 5:this.pinkyRules(e,d,f,c);break;case 4:this.ringRules(e,d,f,c);break;case 3:this.middleRules(e,d,f,c);break;case 1:this.thumbRules(e,d,f,c)}},this.pinkyRules=function(a,b,c,d){a>f.get(c,c+4)&&a<f.get(c,c+8)||this.moveToNote(d-5)},this.ringRules=function(a,b,c,d){a>f.get(c,c+3)&&a<f.get(c,c+7)||this.moveToNote(d-3)},this.middleRules=function(a,b,c,d){a>f.get(c,c+2)&&a<f.get(c,c+5)||this.moveToNote(d-2)},this.thumbRules=function(a,b,c,d){if(!(a>f.get(c,c-3)&&0>a))if(a>0&&a<f.get(c,c+3)){var e=this;setTimeout(e.moveToNote(d+2),100)}else this.moveToNote(d+2)}};e.prototype=Object.create(d.prototype),e.prototype.constructor=e},{"../Finger.js":11}],22:[function(a,b,c){var d=a("../Finger.js").Finger,e=b.exports.RightMiddle=function(a){d.call(this,a.keyboard);var b=new THREE.CubeGeometry(a.middleFingerWidth,a.middleFingerHeight,a.middleFingerLength),c=new THREE.MeshLambertMaterial({color:a.middleFingerColor}),e=new THREE.Vector3(0,.2,.4);this.model=new THREE.Mesh(b,c),this.model.position.copy(e),this.originalY=e.y,this.number=3;var f=this.distances;this.moveAsNeeded=function(a,b,c){var d=this.currentPos.x,e=b-d,f=this.model.currentNote;switch(a){case 5:this.pinkyRules(e,d,f,c);break;case 4:this.ringRules(e,d,f,c);break;case 2:this.indexRules(e,d,f,c);break;case 1:this.thumbRules(e,d,f,c)}},this.pinkyRules=function(a,b,c,d){a>=f.get(c,c+3)&&a<=f.get(c,c+5)||this.moveToNote(d-3)},this.ringRules=function(a,b,c,d){a>=f.get(c,c+1)&&a<=f.get(c,c+4)||this.moveToNote(d-2)},this.indexRules=function(a,b,c,d){a>=f.get(c,c-3)&&a<=f.get(c,c-1)||this.moveToNote(d+2)},this.thumbRules=function(a,b,c,d){if(!(a>=f.get(c,c-6)&&0>a))if(a>0&&a<f.get(c,c+4)){var e=this;setTimeout(e.moveToNote(d+3),100)}else this.moveToNote(d+3)}};e.prototype=Object.create(d.prototype),e.prototype.constructor=e},{"../Finger.js":11}],23:[function(a,b,c){var d=a("../Finger.js").Finger,e=b.exports.RightPinky=function(a){d.call(this,a.keyboard);var b=new THREE.CubeGeometry(a.pinkyWidth,a.pinkyHeight,a.pinkyLength),c=new THREE.MeshLambertMaterial({color:a.pinkyColor}),e=new THREE.Vector3(0,.2,.54);this.model=new THREE.Mesh(b,c),this.model.position.copy(e),this.originalY=e.y,this.number=5;var f=this.distances;this.moveAsNeeded=function(a,b,c){var d=this.currentPos.x,e=b-d,f=this.model.currentNote;switch(a){case 5:this.ringRules(e,d,f,c);break;case 3:this.middleRules(e,d,f,c);break;case 2:this.indexRules(e,d,f,c);break;case 1:this.thumbRules(e,d,f,c)}},this.ringRules=function(a,b,c,d){a>f.get(c,c-3)&&0>a||this.moveToNote(d+2)},this.middleRules=function(a,b,c,d){a>f.get(c,c-5)&&0>a||this.moveToNote(d+3)},this.indexRules=function(a,b,c,d){a>f.get(c,c-7)&&0>a||this.moveToNote(d+5)},this.thumbRules=function(a,b,c,d){if(!(a>f.get(c,c-12)&&0>a))if(a>0&&a<f.get(c,c+1)){var e=this;setTimeout(e.moveToNote(d+7),100)}else this.moveToNote(d+7)},this.setUpNewTween=function(){var a=this,b=function(){a.model.position.x=a.currentPos.x,a.model.position.y=a.currentPos.y+.1,a.model.position.z=a.currentPos.z+.1},c=TWEEN.Easing.Quadratic.Out,d=new TWEEN.Tween(this.currentPos).to(this.newPos,150).easing(c).onUpdate(b);d.start()}};e.prototype=Object.create(d.prototype),e.prototype.constructor=e},{"../Finger.js":11}],24:[function(a,b,c){var d=a("../Finger.js").Finger,e=b.exports.RightRing=function(a){d.call(this,a.keyboard);var b=new THREE.CubeGeometry(a.ringFingerWidth,a.ringFingerHeight,a.ringFingerLength),c=new THREE.MeshLambertMaterial({color:a.ringFingerColor}),e=new THREE.Vector3(0,.2,.45);this.model=new THREE.Mesh(b,c),this.model.position.copy(e),this.originalY=e.y,this.number=4;var f=this.distances;this.moveAsNeeded=function(a,b,c){var d=this.currentPos.x,e=b-d,f=this.model.currentNote;switch(a){case 5:this.pinkyRules(e,d,f,c);break;case 3:this.middleRules(e,d,f,c);break;case 2:this.indexRules(e,d,f,c);break;case 1:this.thumbRules(e,d,f,c)}},this.pinkyRules=function(a,b,c,d){a>f.get(c,c+2)&&a<f.get(c,c+3)||this.moveToNote(d-2)},this.middleRules=function(a,b,c,d){a>f.get(c,c-3)&&0>a||this.moveToNote(d+2)},this.indexRules=function(a,b,c,d){a>f.get(c,c-5)&&0>a||this.moveToNote(d+3)},this.thumbRules=function(a,b,c,d){if(!(a>f.get(c,c-8)&&0>a))if(a>0&&a<f.get(c,c+2)){var e=this;setTimeout(e.moveToNote(d+5),100)}else this.moveToNote(d+5)}};e.prototype=Object.create(d.prototype),e.prototype.constructor=e},{"../Finger.js":11}],25:[function(a,b,c){var d=a("../Finger.js").Finger,e=b.exports.RightThumb=function(a){d.call(this,a.keyboard);var b=new THREE.CubeGeometry(a.thumbWidth,a.thumbHeight,a.thumbLength),c=new THREE.MeshLambertMaterial({color:a.thumbColor}),e=new THREE.Vector3(0,.3,.6);this.model=new THREE.Mesh(b,c),this.model.position.copy(e),this.originalY=e.y,this.number=1;var f=this.distances;this.moveAsNeeded=function(a,b,c){var d=this.currentPos.x,e=b-d,f=this.model.currentNote;switch(a){case 5:this.pinkyRules(e,d,f,c);break;case 4:this.ringRules(e,d,f,c);break;case 3:this.middleRules(e,d,f,c);break;case 2:this.indexRules(e,d,f,c)}},this.pinkyRules=function(a,b,c,d){if(!(a>=f.get(c,c+5)&&a<f.get(c,c+12)))if(a>=f.get(c,c-2)&&0>a){var e=this;setTimeout(e.moveToNote(d-7),100)}else this.moveToNote(d-7)},this.ringRules=function(a,b,c,d){if(!(a>=f.get(c,c+4)&&a<=f.get(c,c+9)))if(a>f.get(c,c-2)&&0>a){var e=this;setTimeout(e.moveToNote(d-5),100)}else this.moveToNote(d-5)},this.middleRules=function(a,b,c,d){if(!(a>=f.get(c,c+2)&&a<=f.get(c,c+7)))if(a>f.get(c,c-3)&&0>a){var e=this;setTimeout(e.moveToNote(d-4),100)}else this.moveToNote(d-4)},this.indexRules=function(a,b,c,d){if(!(a>0&&a<=f.get(c,c+4)))if(a>f.get(c,c-2)&&0>a){var e=this;setTimeout(e.moveToNote(d-2),100)}else this.moveToNote(d-2)},this.setUpNewTween=function(){var a=this,b=function(){a.model.position.x=a.currentPos.x,a.model.position.y=a.currentPos.y+.1,a.model.position.z=a.currentPos.z+.2},c=TWEEN.Easing.Quadratic.Out,d=new TWEEN.Tween(this.currentPos).to(this.newPos,150).easing(c).onUpdate(b);d.start()}};e.prototype=Object.create(d.prototype),e.prototype.constructor=e},{"../Finger.js":11}],26:[function(a,b,c){var d=a("./PianoKey.js").PianoKey;b.exports.Keyboard=function(a){this.model=new THREE.Object3D,this.keys=[];for(var b=this,c=0;c<a.keyInfo.length;c++){var e=new d(a,c);b.keys.push(e),c>20&&109>c&&this.model.add(e.model)}this.model.position.y-=a.whiteKeyHeight/2,this.model.traverse(function(a){a.position.x-=4.45}),this.press=function(a){b.keys[a].press()},this.release=function(a){b.keys[a].release()},this.update=function(){for(var a=this,b=a.keys,c=0;c<b.length;c++)b[c].update();
}}},{"./PianoKey.js":28}],27:[function(a,b,c){b.exports.KeyboardDesign=function(){this.KeyType={WhiteC:0,WhiteD:1,WhiteE:2,WhiteF:3,WhiteG:4,WhiteA:5,WhiteB:6,Black:7},this.whiteKeyStep=.236,this.whiteKeyWidth=.226,this.whiteKeyHeight=.22,this.whiteKeyLength=1.5,this.blackKeyWidth=.1,this.blackKeyHeight=.24,this.blackKeyLength=1,this.blackKeyShiftCDE=.0216,this.blackKeyShiftFGAB=.034,this.blackKeyPosY=.1,this.blackKeyPosZ=-.24,this.noteDropPosZ4WhiteKey=.25,this.noteDropPosZ4BlackKey=.75,this.whiteKeyColor=15794175,this.blackKeyColor=0,this.keyDip=.08,this.keyUpSpeed=.03,this.keyInfo=[];var a=this,b=function(){c(),d(),e()},c=function(){for(var b=0;120>b;b++){var c={};a.keyInfo.push(c)}},d=function(){for(var b=a.KeyType,c=a.keyInfo,d=0;10>d;d++){var e=12*d;c[e+0].keyType=b.WhiteC,c[e+1].keyType=b.Black,c[e+2].keyType=b.WhiteD,c[e+3].keyType=b.Black,c[e+4].keyType=b.WhiteE,c[e+5].keyType=b.WhiteF,c[e+6].keyType=b.Black,c[e+7].keyType=b.WhiteG,c[e+8].keyType=b.Black,c[e+9].keyType=b.WhiteA,c[e+10].keyType=b.Black,c[e+11].keyType=b.WhiteD}},e=function(){var b=a.keyInfo,c=a.KeyType,d=c.WhiteB,e=0,f=0,g=c.Black;for(b[e].keyCenterPosX=f,d=b[e].keyType,e=1;e<b.length;e++)f+=d===g?a.whiteKeyStep/2:b[e].keyType===g?a.whiteKeyStep/2:a.whiteKeyStep,b[e].keyCenterPosX=f,d=b[e].keyType};b()}},{}],28:[function(a,b,c){var d=b.exports.PianoKey=function(a,b){var c,d,e,f=a.KeyType.Black,g=a.keyInfo[b].keyType,h=a.keyInfo[b].keyCenterPosX;a.keyUpSpeed;g===f?(c=new THREE.CubeGeometry(a.blackKeyWidth,a.blackKeyHeight,a.blackKeyLength),d=new THREE.MeshPhongMaterial({color:a.blackKeyColor}),e=new THREE.Vector3(h,a.blackKeyPosY,a.blackKeyPosZ),this.originalColor={r:0,g:0,b:0}):(c=new THREE.CubeGeometry(a.whiteKeyWidth,a.whiteKeyHeight,a.whiteKeyLength),d=new THREE.MeshPhongMaterial({color:a.whiteKeyColor,emissive:1118481}),e=new THREE.Vector3(h,a.whiteKeyPosY,a.whiteKeyPosZ),this.originalColor={r:.941,g:1,b:1}),this.model=new THREE.Mesh(c,d),this.model.position.copy(e),this.keyUpSpeed=a.keyUpSpeed,this.originalY=e.y,this.pressedY=this.originalY-a.keyDip,this.newColor={r:0,g:0,b:0},this.currentColor={r:this.originalColor.r,g:this.originalColor.g,b:this.originalColor.b}};d.prototype.press=function(){this.model.position.y=this.pressedY,this.newColor={r:.145,g:.749,b:.854},this.setUpNewTween(),this.isPressed=!0},d.prototype.release=function(){this.isPressed=!1,this.newColor=this.originalColor,this.setUpNewTween()},d.prototype.update=function(){if(this.model.position.y<this.originalY&&this.isPressed===!1){var a=this.originalY-this.model.position.y;this.model.position.y+=Math.min(a,this.keyUpSpeed)}},d.prototype.setUpNewTween=function(){var a=this,b=function(){a.model.material.color.setRGB(a.currentColor.r,a.currentColor.g,a.currentColor.b)},c=TWEEN.Easing.Quadratic.Out,d=new TWEEN.Tween(this.currentColor).to(this.newColor,150).easing(c).onUpdate(b);d.start()}},{}],29:[function(a,b,c){b.exports.Scene=function(a){var b=$(a),c=b.width(),d=b.height(),e=this,f=new THREE.Scene,g=85,h=c/d,i=.001,j=1e3,k=new THREE.PerspectiveCamera(g,h,i,j);k.position.set(0,3,1.2),k.lookAt(new THREE.Vector3(10,50,5));var l=new THREE.TrackballControls(k);l.rotateSpeed=1,l.zoomSpeed=1.2,l.panSpeed=.8,l.noZoom=!1,l.noPan=!1,l.staticMoving=!0,l.dynamicDampingFactor=.3,l.keys=[65,83,68];var m=Detector.webgl?new THREE.WebGLRenderer({antialias:!0}):new THREE.CanvasRenderer;m.setSize(c,d),m.setClearColor(0,1),m.autoClear=!1,b.append(m.domElement);var n=new THREE.AmbientLight(2236962),o=new THREE.DirectionalLight(16777215,.8);o.position.set(1,2,4).normalize();var p=new THREE.DirectionalLight(16777215,.3);p.position.set(-4,-1,-2).normalize,f.add(n),f.add(o),f.add(p),f.add(k),this.camera=k,this.renderer=m,this.scene=f,this.add=function(a){f.add(a)},this.animate=function(a){requestAnimationFrame(function(){e.animate(a)}),"function"==typeof a&&a(),l.update(),e.renderer.render(e.scene,e.camera)}}},{}]},{},[8]);